––– input –––
searchd
––– output –––
Manticore #!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{9}@[0-9]{6}/!# dev (columnar #!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{7}@[0-9]{6}/!#) (secondary #!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{7}@[0-9]{6}/!#)
Copyright (c) 2001-2016, Andrew Aksyonoff
Copyright (c) 2008-2016, Sphinx Technologies Inc (http://sphinxsearch.com)
Copyright (c) 2017-#!/[0-9]{4}/!#, Manticore Software LTD (https://manticoresearch.com)
[#!/[0-9]{2}:[0-9]{2}.[0-9]{3}/!#] [#!/[0-9]+/!#] using config file '/etc/manticoresearch/manticore.conf' (358 chars)...
starting daemon version '#!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{9}@[0-9]{6}/!# dev (columnar #!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{7}@[0-9]{6}/!#) (secondary #!/[0-9]\.[0-9]\.[0-9]/!# #!/[a-z0-9]{7}@[0-9]{6}/!#)' ...
listening on all interfaces for mysql, port=9306
listening on UNIX socket /var/run/mysqld/mysqld.sock
listening on #!/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:9312|all interfaces/!# for sphinx and http(s)
listening on all interfaces for sphinx and http(s), port=9308
––– input –––
tail -n 100 -f /var/log/manticore/searchd.log | grep -qm 1 '\[BUDDY\] started' && echo "Buddy started!"
––– output –––
Buddy started!
––– input –––
mysql -h0 -P9306 < tests/dumps/1m.sql
––– output –––
––– input –––
mysql -h0 -P9306 -e 'show tables'
––– output –––
+-------+------+
| Index | Type |
+-------+------+
| t     | rt   |
+-------+------+
––– input –––
mysql -h0 -P9306 -e 'select count(*) from t'
––– output –––
+----------+
| count(*) |
+----------+
|  1050000 |
+----------+
––– input –––
mysql -h0 -P9306 -e "select * from t order by id asc limit 20"
––– output –––
+------+------------+-------+----------+------+-------------------------------+-------------------+
| id   | f          | a     | b        | s    | j                             | m                 |
+------+------------+-------+----------+------+-------------------------------+-------------------+
|    1 | aaaaaaaaaa | 21639 | 1.566000 | tKw  | {"a":[2257,6703],"b":3413}    | 8309,28404,31703  |
|    2 | aaaaaaaaaa | 31842 | 1.522000 | XTS  | {"a":[24511,7710],"b":3820}   | 5090,19941,28527  |
|    3 | aaaaaaaaaa | 30190 | 1.146000 | jaW  | {"a":[25453,20410],"b":13821} | 2314,6693,17424   |
|    4 | aaaaaaaaaa |  6275 | 1.176000 | SlY  | {"a":[14379,25590],"b":6276}  | 518,23004,31761   |
|    5 | aaaaaaaaaa |  3997 | 1.584000 | Vvk  | {"a":[6920,4218],"b":452}     | 18661,20350,22137 |
|    6 | aaaaaaaaaa | 16650 | 1.980000 | JwB  | {"a":[10066,18402],"b":7651}  | 18744,21854,32197 |
|    7 | aaaaaaaaaa | 20908 | 1.980000 | fUy  | {"a":[9281,28782],"b":16156}  | 18753,22675,24786 |
|    8 | aaaaaaaaaa | 20009 | 1.662000 | GsT  | {"a":[21925,10486],"b":5794}  | 4597,11397,18291  |
|    9 | aaaaaaaaaa | 19346 | 1.336000 | ZTe  | {"a":[11430,10620],"b":21412} | 2179,5806,32551   |
|   10 | aaaaaaaaaa |   798 | 1.622000 | lpe  | {"a":[13288,20854],"b":17647} | 6066,18210,31737  |
|   11 | aaaaaaaaaa |  4846 | 1.146000 | isM  | {"a":[28772,8057],"b":13778}  | 3322,16679,30133  |
|   12 | aaaaaaaaaa | 30507 | 1.418000 | PlT  | {"a":[25118,10831],"b":26051} | 2684,14053,14816  |
|   13 | aaaaaaaaaa | 12744 | 1.840000 | goI  | {"a":[24589,18452],"b":14867} | 4241,4541,12589   |
|   14 | aaaaaaaaaa |  5348 | 1.810000 | zDP  | {"a":[11148,7830],"b":30031}  | 742,21458,23315   |
|   15 | aaaaaaaaaa |  5089 | 1.703000 | gvN  | {"a":[12004,14294],"b":6705}  | 27256,27353,31230 |
|   16 | aaaaaaaaaa | 26703 | 1.958000 | XXs  | {"a":[13668,31088],"b":22816} | 5120,7131,23913   |
|   17 | aaaaaaaaaa | 16617 | 1.604000 | KRG  | {"a":[15442,30894],"b":31484} | 14652,19412,32628 |
|   18 | aaaaaaaaaa |  5866 | 1.425000 | TZI  | {"a":[19528,9616],"b":19536}  | 2624,21679,30195  |
|   19 | aaaaaaaaaa |  4430 | 1.645000 | WXw  | {"a":[26354,25693],"b":22672} | 822,1353,25149    |
|   20 | aaaaaaaaaa | 26750 | 1.290000 | yZx  | {"a":[4382,16423],"b":17152}  | 2157,9204,10098   |
+------+------------+-------+----------+------+-------------------------------+-------------------+
––– input –––
mysql -h0 -P9306 -e "select * from t where s = 'Psm' order by id asc limit 20"
––– output –––
––– input –––
mysql -h0 -P9306 -e "select * from t where a = 18530 order by id asc limit 20"
––– output –––
+--------+------------+-------+----------+------+-------------------------------+-------------------+
| id     | f          | a     | b        | s    | j                             | m                 |
+--------+------------+-------+----------+------+-------------------------------+-------------------+
|  14943 | aaaaaaaaaa | 18530 | 1.120000 | iVI  | {"a":[18175,26478],"b":14091} | 15430,21791,32321 |
| 114806 | aaaaaaaaaa | 18530 | 1.481000 | Bmz  | {"a":[13964,8477],"b":17522}  | 8451,11351,12996  |
| 195773 | aaaaaaaaaa | 18530 | 1.485000 | eyK  | {"a":[7475,32766],"b":20694}  | 3860,12572,15532  |
| 200872 | aaaaaaaaaa | 18530 | 1.765000 | kjB  | {"a":[28785,9123],"b":11624}  | 12672,18711,20609 |
| 217064 | aaaaaaaaaa | 18530 | 1.415000 | TKh  | {"a":[32636,20072],"b":5237}  | 23135,26200,29321 |
| 223566 | aaaaaaaaaa | 18530 | 1.741000 | gbj  | {"a":[529,31323],"b":9995}    | 3171,24527,26263  |
| 314554 | aaaaaaaaaa | 18530 | 1.612000 | rKd  | {"a":[30921,28083],"b":14682} | 5728,17339,29256  |
| 352169 | aaaaaaaaaa | 18530 | 1.653000 | nSN  | {"a":[16493,5225],"b":20726}  | 4732,14480,26039  |
| 355093 | aaaaaaaaaa | 18530 | 1.825000 | KSn  | {"a":[26467,9759],"b":25410}  | 8040,15331,31676  |
| 362881 | aaaaaaaaaa | 18530 | 1.297000 | YYe  | {"a":[22947,20163],"b":4088}  | 7047,27584,29983  |
| 405014 | aaaaaaaaaa | 18530 | 1.949000 | DCq  | {"a":[12662,20837],"b":4452}  | 8423,9736,25934   |
| 583607 | aaaaaaaaaa | 18530 | 1.967000 | lLP  | {"a":[7394,19883],"b":871}    | 2078,11249,23263  |
| 584941 | aaaaaaaaaa | 18530 | 1.995000 | xcO  | {"a":[23398,28909],"b":19744} | 8373,17858,25650  |
| 623465 | aaaaaaaaaa | 18530 | 1.459000 | qxs  | {"a":[18590,14617],"b":28755} | 13529,20372,23541 |
| 637307 | aaaaaaaaaa | 18530 | 1.675000 | nUP  | {"a":[5084,6774],"b":5175}    | 2198,13812,22100  |
| 663687 | aaaaaaaaaa | 18530 | 1.933000 | xnx  | {"a":[25324,24931],"b":27853} | 6830,9089,15711   |
| 713483 | aaaaaaaaaa | 18530 | 1.632000 | NfF  | {"a":[5939,19313],"b":31627}  | 8678,11961,31881  |
| 731188 | aaaaaaaaaa | 18530 | 1.510000 | Mqx  | {"a":[28073,4389],"b":13297}  | 2337,12557,31736  |
| 786487 | aaaaaaaaaa | 18530 | 1.956000 | Fkz  | {"a":[1635,8080],"b":10447}   | 1448,23866,31453  |
| 790247 | aaaaaaaaaa | 18530 | 1.398000 | Ikx  | {"a":[30281,19774],"b":30912} | 10920,16025,16833 |
+--------+------------+-------+----------+------+-------------------------------+-------------------+
––– input –––
mysqldump -h0 -P9306 --all-databases > /tmp/all-databases.sql
––– output –––
––– input –––
wc -l /tmp/all-databases.sql
––– output –––
160 /tmp/all-databases.sql
